(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{275:function(t,e,a){t.exports=a(506)},280:function(t,e,a){},506:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a.n(n),o=a(16),c=a.n(o),i=(a(280),a(32)),u=a(519),s=a(90),l=a(253),d=a(254),m=a(26),p=a(19),f=a(285),y=["AD","LI","MH","FM","MC","PW","SM","TV","VA"],O=f.map(function(t){return{id:Number(t.ccn3),alpha2Code:t.cca2,commonName:t.name.common,alpha3Code:t.cca3,numericCode:t.ccn3,region:t.region,subregion:t.subregion,isIndependent:t.independent,area:t.area,capital:t.capital,latlng:t.latlng,disabled:y.includes(t.cca2)}}).filter(function(t){return"Antarctic"!==t.region}).filter(function(t){return t.isIndependent});var C=function(){return Promise.resolve(O)},h="COUNTRIES_LOAD_ACTION",v="COUNTRIES_RECEIVE_ACTION";function E(t){var e=t.data,a=t.errors;return{type:v,data:e,errors:a}}var b={loading:!1,loaded:!1,errors:null,data:{}};function g(t){return t.countries.loaded}function j(t){return Object(p.i)(t.countries.data)}function S(t,e){return e.countries.data[t]}var N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case h:return Object(m.a)({},t,{loading:!0});case v:return Object(m.a)({},t,{loading:!1,loaded:!e.errors,errors:e.errors||null,data:e.data||{}});default:return t}},I=a(51),T=a(22),k=a(67),M=a.n(k),A=a(102);function _(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return fetch(t,e).catch(function(n){if(a>3)throw n;return new Promise(function(n,r){setTimeout(function(){_(t,e,a+1).then(n).catch(r)},3e3)})})}var x="20cf4469dcd5b4da5fc7cb448d9d934e",P="EIA_API";function w(t){return"(s)"===t?0:isNaN(t)?null:t}function L(){return(L=Object(A.a)(M.a.mark(function t(e,a){var n,r,o;return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.seriesOfCountry(a),t.next=3,_("http://api.eia.gov/series/?api_key=".concat(x,"&series_id=").concat(n));case 3:return r=t.sent,t.next=6,r.json();case 6:if(!((o=t.sent).data&&o.data.error&&o.data.error.startsWith("invalid series_id"))){t.next=9;break}return t.abrupt("return",[]);case 9:return t.abrupt("return",o.series[0].data.map(function(t){var n=w(t[1]);return{statisticCode:e.code,countryCode:a.alpha2Code,year:Number(t[0]),value:null!==n?e.unitConverter(n):null}}));case 10:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}var U="IEA_API",D={};function R(){return(R=Object(A.a)(M.a.mark(function t(e,a){var n,r,o,c;return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.ieaId,D[n]){t.next=10;break}return t.next=4,_("http://energyatlas.iea.org/DataServlet?edition=WORLD&lang=en&datasets=".concat(n,"&cmd=getdatavalues"));case 4:return r=t.sent,t.next=7,r.json();case 7:o=t.sent,c=o.datasets[n].values,D[n]=Object.keys(c).reduce(function(t,e){var a=c[e];return Object.keys(a).reduce(function(t,n){var r=a[n].value,o={year:Number(e),value:r};return t[n]?t[n].push(o):t[n]=[o],t},t)},{});case 10:return t.abrupt("return",D[n][a.alpha3Code]||[]);case 11:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}var Y="WORLD_BANK_API";function F(){return(F=Object(A.a)(M.a.mark(function t(e,a){var n,r,o;return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.worldBankCode,t.next=3,_("http://api.worldbank.org/v2/countries/".concat(a.alpha2Code,"/indicators/").concat(n,"?format=json&per_page=100"));case 3:return r=t.sent,t.next=6,r.json();case 6:if((o=t.sent)[1]){t.next=9;break}return t.abrupt("return",[]);case 9:return t.abrupt("return",o[1].map(function(t){return{statisticCode:e.code,countryCode:a.alpha2Code,year:Number(t.date),value:t.value}}));case 10:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function K(t){return t/11.63}function B(t){return t/.38}var H=[{code:"COAL_PRODUCTION_MTOE",name:"Coal production",description:"",startingYear:1980,endingYear:2016,unit:"Mtoe",sources:"EIA, U.S. Energy Information Administration",api:P,seriesOfCountry:function(t){return"INTL.7-1-".concat(t.alpha3Code,"-MTOE.A")},unitConverter:function(t){return Number(t.toFixed(2))}},{code:"COAL_CONSUMPTION_MTOE",name:"Coal consumption",description:"",startingYear:1980,endingYear:2016,unit:"Mtoe",sources:"EIA, U.S. Energy Information Administration",api:P,seriesOfCountry:function(t){return"INTL.7-2-".concat(t.alpha3Code,"-MTOE.A")},unitConverter:function(t){return Number(t.toFixed(2))}},{code:"GAS_PRODUCTION_MTOE",name:"Gas production",description:"",startingYear:1980,endingYear:2017,unit:"Mtoe",sources:"EIA, U.S. Energy Information Administration",api:P,seriesOfCountry:function(t){return"INTL.26-1-".concat(t.alpha3Code,"-MTOE.A")},unitConverter:function(t){return Number(t.toFixed(2))}},{code:"GAS_CONSUMPTION_MTOE",name:"Gas consumption",description:"",startingYear:1980,endingYear:2017,unit:"Mtoe",sources:"EIA, U.S. Energy Information Administration",api:P,seriesOfCountry:function(t){return"INTL.26-2-".concat(t.alpha3Code,"-MTOE.A")},unitConverter:function(t){return Number(t.toFixed(2))}},{code:"OIL_PRODUCTION_MTOE",name:"Oil production",description:"",startingYear:1973,endingYear:2014,unit:"Mtoe",sources:"IEA",api:U,ieaId:"-21319742"},{code:"OIL_CONSUMPTION_MTOE",name:"Oil consumption",description:"",startingYear:1973,endingYear:2014,unit:"Mtoe",sources:"IEA",api:U,ieaId:"642753284"},{code:"HYDRO_CONSUMPTION_MTOE",name:"Hydroelectricity consumption",description:"",startingYear:1980,endingYear:2016,unit:"Mtoe",sources:"EIA, U.S. Energy Information Administration",api:P,seriesOfCountry:function(t){return"INTL.33-12-".concat(t.alpha3Code,"-BKWH.A")},unitConverter:function(t){return Number(B(K(t)).toFixed(2))}},{code:"NUCLEAR_CONSUMPTION_MTOE",name:"Nuclear consumption",description:"",startingYear:1980,endingYear:2016,unit:"Mtoe",sources:"EIA, U.S. Energy Information Administration",api:P,seriesOfCountry:function(t){return"INTL.27-12-".concat(t.alpha3Code,"-BKWH.A")},unitConverter:function(t){return Number(B(K(t)).toFixed(2))}},{code:"NON_HYDRO_RENEWABLES_CONSUMPTION_MTOE",name:"Non-Hydroelectric renewables consumption",description:"",startingYear:1980,endingYear:2016,unit:"Mtoe",sources:"EIA, U.S. Energy Information Administration",api:P,seriesOfCountry:function(t){return"INTL.34-12-".concat(t.alpha3Code,"-BKWH.A")},unitConverter:function(t){return Number(B(K(t)).toFixed(2))}},{code:"WASTE_BIOMASS_CONSUMPTION_MTOE",name:"Waste and biomass consumption",description:"",startingYear:1980,endingYear:2016,unit:"Mtoe",sources:"EIA, U.S. Energy Information Administration",api:P,seriesOfCountry:function(t){return"INTL.38-12-".concat(t.alpha3Code,"-BKWH.A")},unitConverter:function(t){return Number(B(K(t)).toFixed(2))}},{code:"PRIMARY_ENERGY_MTOE",name:"Primary energy consumption",description:"",startingYear:1980,endingYear:2016,unit:"Mtoe",sources:"EIA, U.S. Energy Information Administration",api:P,seriesOfCountry:function(t){return"INTL.44-2-".concat(t.alpha3Code,"-MTOE.A")},unitConverter:function(t){return Number(t.toFixed(2))}},{code:"POPULATION",name:"Population",description:"",startingYear:1960,endingYear:2017,unit:"capita",sources:"World Bank",api:Y,worldBankCode:"SP.POP.TOTL"}];function W(t,e){switch(t.api){case P:return function(t,e){return L.apply(this,arguments)}(t,e);case U:return function(t,e){return R.apply(this,arguments)}(t,e);case Y:return function(t,e){return F.apply(this,arguments)}(t,e);default:return Promise.resolve([])}}var G="STATISTICS_LOAD_ACTION",V="STATISTICS_RECEIVE_ACTION",z="COUNTRY_STATISTIC_LOAD_ACTION",J="COUNTRY_STATISTIC_RECEIVE_ACTION";function q(t){var e=t.data,a=t.errors;return{type:V,data:e,errors:a}}function $(t){var e=t.countryCode,a=t.statisticCode,n=t.data,r=t.errors;return{type:J,countryCode:e,statisticCode:a,data:n,errors:r}}var Q={loading:!0,loaded:!1,errors:null,values:[]};function X(t,e){switch(e.type){case z:return Q;case J:return{loading:!1,loaded:!e.errors,errors:e.errors||null,values:e.data||{}};default:return t}}var Z={loading:!1,loaded:!1,errors:null,data:{}};function tt(t){return t.statistics.loaded}function et(t){return Object(p.i)(t.statistics.data)}function at(t,e){return e.statistics.data[t]}function nt(t,e){var a=t.statisticCode,n=t.countryCode;return at(a,e).values[n]}function rt(t,e){var a=nt({statisticCode:t.statisticCode,countryCode:t.countryCode},e);return a?a.values:[]}function ot(t,e){var a=t.statisticCodes,n=t.countryCode;return a.every(function(t){return function(t,e){var a=nt({statisticCode:t.statisticCode,countryCode:t.countryCode},e);return!!a&&a.loaded}({statisticCode:t,countryCode:n},e)})}function ct(t,e){var a,n=t.mapOfStatisticCodes,r=t.countryCode,o=Object(p.c)(function(t){return rt({statisticCode:t,countryCode:r},e)},n),c=Object(p.i)(o),i=c.map(function(t){return Math.min.apply(Math,Object(I.a)(t.map(function(t){return t.year})))}),u=c.map(function(t){return Math.max.apply(Math,Object(I.a)(t.map(function(t){return t.year})))}),s=Math.max.apply(Math,Object(I.a)(i)),l=Math.min.apply(Math,Object(I.a)(u)),d=Object(p.d)(function(t,e){return t.map(function(t){var a=t.year,n=t.value;return Object(T.a)({year:a},e,n)})},o),m=(a=[]).concat.apply(a,Object(I.a)(Object(p.i)(d))),f=Object(p.a)(function(t){return t.year},m);return Object.keys(f).sort().map(function(t){var e=f[t];return Object(p.e)(e)}).filter(function(t){return s<=t.year&&t.year<=l})}function it(t){var e=t.statisticCode,a=t.countryCode;return function(t,n){var r=n(),o=at(e,r),c=S(a,r);o.values[a]&&o.values[a].loaded||(t(function(t,e){return{type:z,statisticCode:t,countryCode:e}}(e,a)),W(o,c).then(function(n){var r=n.map(function(t){return{year:t.year,value:t.value}});t($({countryCode:a,statisticCode:e,data:r}))}).catch(function(n){return t($({statisticCode:e,countryCode:a,errors:n}))}))}}function ut(t){var e=t.statisticCodes,a=t.countryCode;return function(t,n){return Promise.all(e.map(function(e){return it({statisticCode:e,countryCode:a})(t,n)}))}}var st=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case G:return Object(m.a)({},t,{loading:!0});case V:return Object(m.a)({},t,{loading:!1,loaded:!e.errors,errors:e.errors||null,data:e.data||{}});case z:case J:var a=t.data[e.statisticCode],n=a.values[e.countryCode];return Object(m.a)({},t,{data:Object(m.a)({},t.data,Object(T.a)({},e.statisticCode,Object(m.a)({},a,{values:Object(m.a)({},a.values,Object(T.a)({},e.countryCode,X(n,e)))})))});default:return t}},lt=Object(s.combineReducers)({countries:N,statistics:st}),dt=[Object(s.applyMiddleware)(d.a)],mt=Object(l.composeWithDevTools)({}).apply(void 0,dt),pt=Object(s.createStore)(lt,mt),ft=(a(288),a(120)),yt=(a(249),a(83)),Ot=(a(507),a(159)),Ct=(a(161),a(107)),ht=a(513),vt=a(521),Et=a(514),bt=a(518),gt=a(520),jt=a(34),St=a(29),Nt=a(38),It=a(35),Tt=a(37),kt=function(t){function e(){var t;return Object(jt.a)(this,e),(t=Object(Nt.a)(this,Object(It.a)(e).call(this))).state={},t}return Object(Tt.a)(e,t),Object(St.a)(e,[{key:"setCountry",value:function(t){this.setState(function(e){return Object(m.a)({},e,{countryCode:t})})}},{key:"setStatistic",value:function(t){this.setState(function(e){return Object(m.a)({},e,{statisticCode:t})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"HomeView"})}}]),e}(n.Component),Mt=(a(197),a(70)),At=(a(199),a(84)),_t=a(510),xt=a(232),Pt=a(511),wt=a(233),Lt=a(234),Ut=a(508),Dt=function(t){function e(){var t;return Object(jt.a)(this,e),(t=Object(Nt.a)(this,Object(It.a)(e).call(this))).state={},t}return Object(Tt.a)(e,t),Object(St.a)(e,[{key:"componentDidUpdate",value:function(t){var e=this,a=this.props,n=a.countryCode,r=a.statisticCode;(t.countryCode!==n&&n||t.statisticCode!==r&&r)&&fetch("".concat("http://localhost:5001","/statistic/").concat(r,"?country=").concat(n)).then(function(t){return t.json()}).then(function(t){return e.setState(t)})}},{key:"render",value:function(){var t=this.state,e=t.data,a=t.unit;return e?r.a.createElement("div",{className:"StatisticChart"},r.a.createElement(_t.a,{width:600,height:300,data:e},r.a.createElement(xt.a,{type:"monotone",dataKey:"value",stroke:"#8884d8",unit:a,dot:!1}),r.a.createElement(Pt.a,{stroke:"#ccc",strokeDasharray:"5 5"}),r.a.createElement(wt.a,{dataKey:"year"}),r.a.createElement(Lt.a,null),r.a.createElement(Ut.a,null))):null}}]),e}(n.Component);Dt.defaultProps={countryCode:null,statisticCode:null};var Rt=Dt,Yt=function(t){function e(){var t;return Object(jt.a)(this,e),(t=Object(Nt.a)(this,Object(It.a)(e).call(this))).state={},t}return Object(Tt.a)(e,t),Object(St.a)(e,[{key:"setCountry",value:function(t){this.setState(function(e){return Object(m.a)({},e,{countryCode:t})})}},{key:"setStatistic",value:function(t){this.setState(function(e){return Object(m.a)({},e,{statisticCode:t})})}},{key:"render",value:function(){var t=this,e=this.props,a=e.countries,n=e.statistics,o=this.state,c=o.statisticCode,i=o.countryCode;return r.a.createElement("div",{className:"ChartView"},r.a.createElement(At.a,{type:"flex",justify:"center"},r.a.createElement("h2",null,"Select a country")),r.a.createElement(At.a,{type:"flex",justify:"center"},r.a.createElement(Mt.a,{span:10},r.a.createElement(yt.a,{style:{width:"100%"},size:"large",placeholder:"Countries",maxTagCount:3,optionFilterProp:"title",showSearch:!0,onSelect:function(e){t.setCountry(e)}},Object(p.h)(Object(p.g)("commonName"),a).map(function(t){return r.a.createElement(yt.a.Option,{key:t.alpha2Code,title:"".concat(t.commonName," (").concat(t.alpha3Code,")")},t.commonName)})))),r.a.createElement(At.a,{type:"flex",justify:"center"},r.a.createElement("h2",null,"or a statistic")),r.a.createElement(At.a,{type:"flex",justify:"center"},r.a.createElement(Mt.a,{span:10},r.a.createElement(yt.a,{style:{width:"100%"},size:"large",placeholder:"Statistics",maxTagCount:3,optionFilterProp:"title",showSearch:!0,onSelect:function(e){t.setStatistic(e)}},Object(p.h)(Object(p.g)("name"),n).map(function(t){return r.a.createElement(yt.a.Option,{key:t.code,title:"".concat(t.name)},t.name)})))),r.a.createElement(Rt,{countryCode:i,statisticCode:c}))}}]),e}(n.Component),Ft=(Object(i.b)(function(t){return{countries:j(t),statistics:et(t)}})(Yt),a(493),a(94)),Kt=a(496),Bt=a(512),Ht=a(516),Wt=a(250);function Gt(t){var e=t.active,a=t.payload;if(e&&a&&a.length>0){var n=t.label,o=a[0].unit,c=a.reduce(function(t,e){return t+e.value},0);return r.a.createElement("div",{className:"CustomTooltip"},r.a.createElement("div",null,n),r.a.createElement("div",null,a&&a.map(function(t){return r.a.createElement("div",{key:t.dataKey,style:{lineHeight:"22px",color:t.color}},"".concat(t.name," : ").concat(t.value," ").concat(t.unit))}),r.a.createElement("div",{key:"total",style:{lineHeight:"22px",color:"red"}},"Total : ".concat(c.toFixed(2)," ").concat(o))))}return null}Gt.defaultProps={label:""};var Vt=function(t){var e=t.data,a=t.stacked,n=t.setStacked,o=t.perCapita,c=t.setPerCapita,i=o?" toe/capita":" Mtoe",u=e.map(function(t){return Object(m.a)({},t,{total:Number((t.coal+t.oil+t.gas+t.hydro+t.nuclear+t.renewables).toFixed(2))})}),s=o?u.map(function(t){return Object(m.a)({},t,Object(p.c)(function(e){return Number((e*Math.pow(10,6)/t.population).toFixed(2))},Object(p.f)(["year","population"],t)))}):u,l=e.some(function(t){return t.coal>=.01}),d=e.some(function(t){return t.oil>=.01}),f=e.some(function(t){return t.gas>=.01}),y=e.some(function(t){return t.nuclear>=.01}),O=e.some(function(t){return t.hydro>=.01}),C=e.some(function(t){return t.renewables>=.01}),h=a?Kt.a:xt.a;return r.a.createElement("div",{className:"PrimaryEnergyChart"},r.a.createElement("h3",{className:"PrimaryEnergyChart__title"},"Primary Energy Consumption"),r.a.createElement("div",null,r.a.createElement(Ft.a.Group,{buttonStyle:"solid",size:"small",value:a,onChange:function(t){return n(t.target.value)},style:{marginRight:"10px"}},r.a.createElement(Ft.a.Button,{value:!0},"Stacked"),r.a.createElement(Ft.a.Button,{value:!1},"Split")),r.a.createElement(Ft.a.Group,{buttonStyle:"solid",size:"small",value:o,onChange:function(t){return c(t.target.value)}},r.a.createElement(Ft.a.Button,{value:!1},"Absolute"),r.a.createElement(Ft.a.Button,{value:!0},"Per capita"))),r.a.createElement(Bt.a,{height:300,width:"100%"},r.a.createElement(Ht.a,{data:s,margin:{top:10,right:0,bottom:10,left:0}},l&&r.a.createElement(h,{type:"monotone",dataKey:"coal",dot:!1,activeDot:!1,name:"Coal",stroke:"black",fill:"black",stackId:"1",unit:i}),d&&r.a.createElement(h,{type:"monotone",dataKey:"oil",dot:!1,activeDot:!1,name:"Oil",stroke:"grey",fill:"grey",stackId:"1",unit:i}),f&&r.a.createElement(h,{type:"monotone",dataKey:"gas",dot:!1,activeDot:!1,name:"Gas",stroke:"orange",fill:"orange",stackId:"1",unit:i}),y&&r.a.createElement(h,{type:"monotone",dataKey:"nuclear",dot:!1,activeDot:!1,name:"Nuclear",stroke:"purple",fill:"purple",stackId:"1",unit:i}),O&&r.a.createElement(h,{type:"monotone",dataKey:"hydro",dot:!1,activeDot:!1,name:"Hydroelectricity",stroke:"blue",fill:"blue",stackId:"1",unit:i}),C&&r.a.createElement(h,{type:"monotone",dataKey:"renewables",dot:!1,activeDot:!1,name:"Other renewables",stroke:"green",fill:"green",stackId:"1",unit:i}),r.a.createElement(Pt.a,{stroke:"#ccc",opacity:.2}),r.a.createElement(wt.a,{dataKey:"year",domain:["dataMin","dataMax"],interval:4}),r.a.createElement(Lt.a,{label:{value:i,angle:-90,position:"insideLeft"}}),r.a.createElement(Ut.a,{content:Gt}),r.a.createElement(Wt.a,{iconType:"plainLine"}))))},zt={coal:"COAL_CONSUMPTION_MTOE",gas:"GAS_CONSUMPTION_MTOE",oil:"OIL_CONSUMPTION_MTOE",hydro:"HYDRO_CONSUMPTION_MTOE",nuclear:"NUCLEAR_CONSUMPTION_MTOE",renewables:"NON_HYDRO_RENEWABLES_CONSUMPTION_MTOE",population:"POPULATION"},Jt=Object(p.i)(zt),qt=Object(i.b)(function(t,e){var a=e.countryCode;return{data:ct({mapOfStatisticCodes:zt,countryCode:a},t)}})(Vt),$t=function(t){function e(){var t;return Object(jt.a)(this,e),(t=Object(Nt.a)(this,Object(It.a)(e).call(this))).state={stacked:!0,perCapita:!1},t}return Object(Tt.a)(e,t),Object(St.a)(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.countryCode;(0,t.loadStatistics)({statisticCodes:Jt,countryCode:e})}},{key:"componentDidUpdate",value:function(t){var e=this.props,a=e.countryCode,n=e.loadStatistics;a!==t.countryCode&&n({statisticCodes:Jt,countryCode:a})}},{key:"setStacked",value:function(t){this.setState({stacked:t})}},{key:"setPerCapita",value:function(t){this.setState({perCapita:t})}},{key:"render",value:function(){var t=this,e=this.props,a=e.isLoaded,n=e.countryCode,o=this.state,c=o.stacked,i=o.perCapita;return a?r.a.createElement(qt,{countryCode:n,setStacked:function(e){return t.setStacked(e)},setPerCapita:function(e){return t.setPerCapita(e)},stacked:c,perCapita:i}):r.a.createElement(Ct.a,null,r.a.createElement(qt,{countryCode:n,stacked:c,perCapita:i,setStacked:function(){}}))}}]),e}(n.Component),Qt=Object(i.b)(function(t,e){return{isLoaded:ot({statisticCodes:Jt,countryCode:e.countryCode},t)}},{loadStatistics:ut})($t),Xt=a(0),Zt=a.n(Xt);Zt.a.arrayOf(Zt.a.shape({year:Zt.a.number.isRequired,value:Zt.a.number.isRequired}));function te(t){if(t.active){var e=t.payload,a=t.label,n=t.filter;return r.a.createElement("div",{className:"CustomTooltip"},r.a.createElement("div",null,a),r.a.createElement("div",null,e&&e.filter(n).map(function(t){return r.a.createElement("div",{key:t.dataKey,style:{lineHeight:"22px",color:t.color}},"".concat(t.name," : ").concat(t.value," ").concat(t.unit))})))}return null}te.defaultProps={label:"",filter:function(t){return t}};var ee=function(t){var e=t.fuel,a=t.prodStatistic,n=t.consoStatistic,o=t.prodValues,c=t.consoValues;n.unit!==a.unit&&console.warn("Production and consommation have not the same unit",[a.code,n.code]);var i=n.unit,u=function(t){var e,a=Object(p.i)(t),n=a.map(function(t){return Math.min.apply(Math,Object(I.a)(t.map(function(t){return t.year})))}),r=a.map(function(t){return Math.max.apply(Math,Object(I.a)(t.map(function(t){return t.year})))}),o=Math.max.apply(Math,Object(I.a)(n)),c=Math.min.apply(Math,Object(I.a)(r)),i=Object(p.d)(function(t,e){return t.map(function(t){var a=t.year,n=t.value;return Object(T.a)({year:a},e,n)})},t),u=(e=[]).concat.apply(e,Object(I.a)(Object(p.i)(i))),s=Object(p.a)(function(t){return t.year},u);return Object.keys(s).sort().map(function(t){var e=s[t];return Object(p.e)(e)}).filter(function(t){return o<=t.year&&t.year<=c})}({prod:o,conso:c}).map(function(t){var e=Number((t.prod-t.conso).toFixed(2));return{year:t.year,prod:t.prod,conso:t.conso,export:e>0?e:null,import:e<0?-e:null,base:Math.min(t.prod,t.conso)}});return r.a.createElement("div",{className:"ProdConsoChart"},r.a.createElement("h3",null,e),r.a.createElement(Bt.a,{height:250,width:"100%"},r.a.createElement(Ht.a,{data:u,margin:{top:30,right:20,bottom:5,left:20}},r.a.createElement(Kt.a,{type:"monotone",dot:!1,dataKey:"base",stroke:"none",stackId:"1",activeDot:!1,fill:"none",unit:i}),r.a.createElement(Kt.a,{type:"monotone",dot:!1,unit:i,name:"".concat(e," export"),dataKey:"export",activeDot:!1,stroke:"green",strokeOpacity:0,fillOpacity:1,fill:"green",stackId:"1"}),r.a.createElement(Kt.a,{type:"monotone",dot:!1,unit:i,name:"".concat(e," import"),dataKey:"import",activeDot:!1,stroke:"red",strokeOpacity:0,fillOpacity:1,fill:"red",stackId:"1"}),r.a.createElement(xt.a,{type:"monotone",dataKey:"conso",dot:!1,unit:i,stroke:"#880000",strokeWidth:3,name:n.name}),r.a.createElement(xt.a,{type:"monotone",dataKey:"prod",dot:!1,unit:i,stroke:"black",strokeWidth:3,strokeOpacity:.7,name:a.name}),r.a.createElement(Pt.a,{stroke:"#ccc",opacity:.2}),r.a.createElement(wt.a,{dataKey:"year",domain:["dataMin","dataMax"],interval:9}),r.a.createElement(Lt.a,{label:{value:i,position:"insideTopLeft",offset:-20}}),r.a.createElement(Ut.a,{content:function(t){return r.a.createElement(te,Object.assign({},t,{filter:function(t){return"base"!==t.name}}))}}))))},ae=Object(i.b)(function(t,e){return{prodStatistic:at(e.prodStatisticCode,t),consoStatistic:at(e.consoStatisticCode,t),prodValues:rt({statisticCode:e.prodStatisticCode,countryCode:e.countryCode},t),consoValues:rt({statisticCode:e.consoStatisticCode,countryCode:e.countryCode},t)}})(ee),ne=function(t){function e(){return Object(jt.a)(this,e),Object(Nt.a)(this,Object(It.a)(e).apply(this,arguments))}return Object(Tt.a)(e,t),Object(St.a)(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.consoStatisticCode,a=t.prodStatisticCode,n=t.countryCode;(0,t.loadStatistics)({statisticCodes:[e,a],countryCode:n})}},{key:"componentDidUpdate",value:function(t){var e=this.props,a=e.countryCode,n=e.loadStatistics,r=[e.consoStatisticCode,e.prodStatisticCode];a!==t.countryCode&&n({statisticCodes:r,countryCode:a})}},{key:"render",value:function(){var t=this.props,e=t.isLoaded,a=t.fuel,n=t.consoStatisticCode,o=t.prodStatisticCode,c=t.countryCode;return e?r.a.createElement(ae,{fuel:a,consoStatisticCode:n,prodStatisticCode:o,countryCode:c}):r.a.createElement(Ct.a,null,r.a.createElement(ae,{fuel:a,consoStatisticCode:n,prodStatisticCode:o,countryCode:c}))}}]),e}(n.Component),re=Object(i.b)(function(t,e){return{isLoaded:ot({statisticCodes:[e.prodStatisticCode,e.consoStatisticCode],countryCode:e.countryCode},t)}},{loadStatistics:ut})(ne),oe=a(185),ce=a(515),ie=a(517),ue=a(45),se=a.n(ue),le=function(t){function e(){return Object(jt.a)(this,e),Object(Nt.a)(this,Object(It.a)(e).apply(this,arguments))}return Object(Tt.a)(e,t),Object(St.a)(e,[{key:"componentDidMount",value:function(){this.createGeoJSON()}},{key:"componentDidUpdate",value:function(t){var e=this.props.data;t.data!==e&&(this.geojson.remove(),this.createGeoJSON())}},{key:"createGeoJSON",value:function(){var t=this.props,e=t.leaflet.map,a=t.data;this.geojson=se.a.geoJSON(a).addTo(e);var n=this.geojson.getBounds();e.flyToBounds(n)}},{key:"render",value:function(){return null}}]),e}(n.Component),de=Object(oe.b)(le);var me=function(t){var e=t.country,a=t.countryGeoJSON;return r.a.createElement("div",{className:"CountryMap"},r.a.createElement(ce.a,{center:e.latlng,zoom:2,style:{height:"300px",zIndex:0}},r.a.createElement(ie.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a&&r.a.createElement(de,{data:a})))},pe=function(t){function e(){var t;return Object(jt.a)(this,e),(t=Object(Nt.a)(this,Object(It.a)(e).call(this))).state={geojson:null},t}return Object(Tt.a)(e,t),Object(St.a)(e,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"componentDidUpdate",value:function(t){var e=this.props.country;t.country.alpha2Code!==e.alpha2Code&&this.fetch()}},{key:"fetch",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=this,e=this.props.country;fetch("/geo/".concat(e.alpha3Code,".geo.json")).then(function(t){return t.json()}).then(function(e){return t.setState({geojson:e})})})},{key:"render",value:function(){var t=this.props.country,e=this.state.geojson;return r.a.createElement(me,{country:t,countryGeoJSON:e})}}]),e}(n.Component);function fe(t){var e=t.country;if(!e||e.disabled)return r.a.createElement(bt.a,{to:"/"});var a=e.alpha2Code;return r.a.createElement("div",{className:"CountryView"},r.a.createElement(At.a,{gutter:16,style:{marginBottom:"20px"}},r.a.createElement(Mt.a,{sm:24,md:18},r.a.createElement("h2",null,e.commonName),r.a.createElement("div",null,"Capital: ".concat(e.capital)),r.a.createElement("div",null,"Area: ".concat(e.area.toLocaleString()," km\xb2")),r.a.createElement("div",null,r.a.createElement(Qt,{countryCode:e.alpha2Code}))),r.a.createElement(Mt.a,{sm:0,md:6},r.a.createElement("img",{style:{height:"100px"},src:"/img/flags/".concat(e.alpha3Code,".svg"),alt:"Flag of ".concat(e.commonName)}),r.a.createElement(pe,{country:e}))),r.a.createElement(At.a,null,r.a.createElement("h3",null,"Imports/Exports"),r.a.createElement(Mt.a,{md:8,sm:24},r.a.createElement(re,{countryCode:a,prodStatisticCode:"COAL_PRODUCTION_MTOE",consoStatisticCode:"COAL_CONSUMPTION_MTOE",fuel:"Coal"})),r.a.createElement(Mt.a,{md:8,sm:24},r.a.createElement(re,{countryCode:a,prodStatisticCode:"OIL_PRODUCTION_MTOE",consoStatisticCode:"OIL_CONSUMPTION_MTOE",fuel:"Oil"})),r.a.createElement(Mt.a,{md:8,sm:24},r.a.createElement(re,{countryCode:a,prodStatisticCode:"GAS_PRODUCTION_MTOE",consoStatisticCode:"GAS_CONSUMPTION_MTOE",fuel:"Gas"}))))}fe.defaultProps={country:null};var ye=Object(i.b)(function(t,e){return{country:S(e.match.params.countryCode,t)}})(fe),Oe=a(194);function Ce(t){var e=t.loadFunctions,a=t.isLoadedSelector,o=void 0===a?function(){return!1}:a,c=t.mapStateToProps,u=void 0===c?function(){}:c,s=function(t){return function(a,n){return e.map(function(e){return e(t)(a,n)})}};return function(t){var e=t?Object(i.b)(u)(t):function(){return null};return Object(i.b)(function(t,e){return{isLoaded:o(e,t)}},{load:s})(function(t){function a(){return Object(jt.a)(this,a),Object(Nt.a)(this,Object(It.a)(a).apply(this,arguments))}return Object(Tt.a)(a,t),Object(St.a)(a,[{key:"componentDidMount",value:function(){var t=this.props,e=t.load;t.isLoaded;e(Object(Oe.a)(t,["load","isLoaded"]))}},{key:"render",value:function(){var t=this.props,a=t.isLoaded,n=(t.load,Object(Oe.a)(t,["isLoaded","load"]));return a?r.a.createElement(e,n):null}}]),a}(n.Component))}}var he=Ce({loadFunctions:[function(){return function(t){return t({type:h}),C().then(function(e){return t(E({data:Object(p.b)(Object(p.g)("alpha2Code"),e)}))}).catch(function(e){return t(E({errors:e}))})}}]})(),ve=Ce({loadFunctions:[function(){return function(t){return t({type:G}),Promise.resolve(H).then(function(e){var a=e.map(function(t){return Object(m.a)({},t,{values:{}})});t(q({data:Object(p.b)(Object(p.g)("code"),a)}))}).catch(function(e){return t(q({errors:e}))})}}]})();var Ee=Object(gt.a)(Object(i.b)(function(t){return{isReady:g(t)&&tt(t),countries:j(t)}})(function(t){var e=t.isReady,a=t.countries,n=t.history;return r.a.createElement("div",{className:"AppLayout"},r.a.createElement(he,null),r.a.createElement(ve,null),!e&&r.a.createElement(Ct.a,{size:"large"}),e&&r.a.createElement(ft.a,null,r.a.createElement(ft.a.Header,{style:{position:"fixed",zIndex:10,width:"100%"}},r.a.createElement(Ot.a,{mode:"horizontal",theme:"dark",selectable:!1,style:{lineHeight:"64px"}},r.a.createElement(Ot.a.Item,{key:"home"},r.a.createElement(ht.a,{to:"/home"},r.a.createElement("strong",null,"Home"))),r.a.createElement(Ot.a.Item,null,r.a.createElement(yt.a,{style:{width:"20vw"},placeholder:"Countries",optionFilterProp:"title",showSearch:!0,onSelect:function(t){n.push("/country/".concat(t))}},Object(p.h)(Object(p.g)("commonName"),a).map(function(t){return r.a.createElement(yt.a.Option,{key:t.alpha2Code,disabled:t.disabled,title:"".concat(t.commonName," (").concat(t.alpha3Code,")")},"".concat(t.commonName).concat(t.disabled?" (No data)":""))}))))),r.a.createElement(ft.a.Content,{style:{padding:"20px 50px 0 50px",marginTop:64}},r.a.createElement(vt.a,null,r.a.createElement(Et.a,{path:"/home",exact:!0,component:kt}),r.a.createElement(Et.a,{path:"/country/:countryCode",exact:!0,component:ye}),r.a.createElement(Et.a,{component:function(){return r.a.createElement(bt.a,{to:{pathname:"/home"}})}}))),r.a.createElement(ft.a.Footer,null,"Sources: IEA & EIA")))}));var be=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i.a,{store:pt},r.a.createElement(u.a,null,r.a.createElement(Ee,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[275,2,1]]]);
//# sourceMappingURL=main.06a6ed0b.chunk.js.map